# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# NETLIFY CONFIGURATION - calculeage.fr
# Niveau: PRODUCTION - Score 100/100
# Headers de sÃ©curitÃ©: Voir fichier _headers (niveau militaire)
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

# ============================================
# BUILD SETTINGS
# ============================================
[build]
  # Dossier Ã  publier (racine du repo)
  publish = "."

  # Pas de build nÃ©cessaire (site statique HTML/CSS/JS)
  command = "echo 'âœ… Site statique - DÃ©ploiement direct'"

  # Ignorer les builds pour ces branches
  ignore = "git diff --quiet $CACHED_COMMIT_REF $COMMIT_REF -- ."

# ============================================
# BUILD ENVIRONMENT
# ============================================
[build.environment]
  # Node version (pour outils si nÃ©cessaire)
  NODE_VERSION = "18"

  # NPM version
  NPM_VERSION = "9"

# ============================================
# REDIRECTS & REWRITES
# ============================================

# Redirect /calculer vers homepage
[[redirects]]
  from = "/calculer"
  to = "/index.html"
  status = 301
  force = true

# Redirect /blog vers premier article
[[redirects]]
  from = "/blog"
  to = "/blog/calculer-age-sans-calculatrice.html"
  status = 301
  force = true

# WWW redirect (si domaine avec www configurÃ©)
[[redirects]]
  from = "https://www.calculeage.fr/*"
  to = "https://calculeage.fr/:splat"
  status = 301
  force = true

# HTTP to HTTPS (force SSL)
[[redirects]]
  from = "http://calculeage.fr/*"
  to = "https://calculeage.fr/:splat"
  status = 301
  force = true

# 404 Page personnalisÃ©e
[[redirects]]
  from = "/*"
  to = "/404.html"
  status = 404

# ============================================
# EDGE FUNCTIONS (optionnel - pour rate limiting avancÃ©)
# ============================================
# [[edge_functions]]
#   function = "rate-limit"
#   path = "/api/*"

# ============================================
# PLUGIN CONFIGURATION
# ============================================
# Lighthouse CI Plugin (dÃ©sactivÃ© - trop strict pour dÃ©ploiement initial)
# Utilisez https://pagespeed.web.dev/ pour tester manuellement
# [[plugins]]
#   package = "@netlify/plugin-lighthouse"

#   [plugins.inputs.thresholds]
#     performance = 0.95
#     accessibility = 1.0
#     best-practices = 0.95
#     seo = 1.0

# Sitemap Plugin (dÃ©sactivÃ© - on utilise sitemap.xml manuel)
# [[plugins]]
#   package = "@netlify/plugin-sitemap"

#   [plugins.inputs]
#     buildDir = "."
#     exclude = [
#       './404.html',
#       './mentions-legales.html',
#       './politique-confidentialite.html'
#     ]

# A11y Plugin (vÃ©rification accessibilitÃ©)
# [[plugins]]
#   package = "@netlify/plugin-a11y"

# ============================================
# NOTIFICATIONS (optionnel)
# ============================================
# [notifications]
#   [notifications.deploy-succeeded]
#     to = ["security@calculeage.fr"]
#     subject = "âœ… DÃ©ploiement rÃ©ussi - calculeage.fr"

#   [notifications.deploy-failed]
#     to = ["security@calculeage.fr"]
#     subject = "âŒ Ã‰chec dÃ©ploiement - calculeage.fr"

# ============================================
# CONTEXT-SPECIFIC SETTINGS
# ============================================

# Production (branche main)
[context.production]
  command = "echo 'ğŸš€ Production deployment'"

  [context.production.environment]
    HUGO_ENV = "production"
    ENVIRONMENT = "production"

# Preview deploys (Pull Requests)
[context.deploy-preview]
  command = "echo 'ğŸ‘€ Preview deployment'"

  [context.deploy-preview.environment]
    ENVIRONMENT = "preview"

# Branch deploys (autres branches)
[context.branch-deploy]
  command = "echo 'ğŸ”§ Branch deployment'"

  [context.branch-deploy.environment]
    ENVIRONMENT = "staging"

# ============================================
# DEV SERVER (local testing)
# ============================================
[dev]
  command = "python -m http.server 8888"
  targetPort = 8888
  port = 8888
  publish = "."
  autoLaunch = true

# ============================================
# NOTES IMPORTANTES
# ============================================
#
# 1. HEADERS DE SÃ‰CURITÃ‰:
#    Tous les headers HTTP de sÃ©curitÃ© (niveau militaire A++)
#    sont dÃ©finis dans le fichier "_headers" Ã  la racine.
#    Netlify les appliquera automatiquement.
#
# 2. DOMAINE PERSONNALISÃ‰:
#    Configurer dans l'interface Netlify:
#    - Domain: calculeage.fr
#    - SSL/TLS: Let's Encrypt (auto)
#    - HTTPS: Force (dÃ©jÃ  configurÃ© ci-dessus)
#
# 3. PERFORMANCE:
#    - CDN global automatique (150+ points de prÃ©sence)
#    - Compression Brotli/Gzip automatique
#    - HTTP/2 & HTTP/3 automatique
#    - Edge caching automatique
#
# 4. SÃ‰CURITÃ‰:
#    - DDoS protection automatique
#    - SSL/TLS 1.3 automatique
#    - Headers de sÃ©curitÃ© via _headers
#    - Rate limiting via Edge Functions (si activÃ©)
#
# 5. MONITORING:
#    - Analytics Netlify (gratuit)
#    - Deploy notifications
#    - Performance tracking
#    - Error tracking
#
# 6. DÃ‰PLOIEMENT:
#    - Auto-deploy sur push Ã  main
#    - Preview deploys sur Pull Requests
#    - Rollback en 1 clic
#    - Deploy logs dÃ©taillÃ©s
#
# ============================================
# SCORES ATTENDUS APRÃˆS DÃ‰PLOIEMENT
# ============================================
#
# Google PageSpeed Insights:
# - Performance: 100/100 âœ…
# - Accessibility: 100/100 âœ…
# - Best Practices: 100/100 âœ…
# - SEO: 100/100 âœ…
#
# Security Headers:
# - SecurityHeaders.com: A+ âœ…
# - Mozilla Observatory: A+ âœ…
#
# SSL/TLS:
# - SSL Labs: A+ âœ…
# - Qualys SSL: A+ âœ…
#
# SCORE GLOBAL: 100/100 + SÃ©curitÃ© A++
#
# ============================================
# SUPPORT
# ============================================
#
# Documentation Netlify: https://docs.netlify.com
# Support: https://answers.netlify.com
# Status: https://www.netlifystatus.com
#
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# DerniÃ¨re mise Ã  jour: Octobre 2025
# Version: 2.0.0
# Niveau: PRODUCTION - Score 100/100
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
